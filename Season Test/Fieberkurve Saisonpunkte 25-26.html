<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fieberkurve Saisonpunkte 25-26</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body { font-family: 'Segoe UI', Roboto, sans-serif; margin:0;padding:0; background: #f9fafc; display:flex; flex-direction:column; align-items:center; min-height:100vh;}
h1 { margin:30px 0; font-size:2rem; font-weight:700; background: linear-gradient(90deg,#0056b3,#0091ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent;}
.chart-container { width:90%; max-width:1200px; height:70vh; background:white; border-radius:12px; padding:20px; margin-bottom:40px;}
textarea { display:none; }
</style>
</head>
<body>

<h1>Fieberkurve Saisonpunkte 25-26</h1>
<div class="chart-container">
  <canvas id="fieberkurveChart"></canvas>
</div>

<!-- Paste the League Stats here -->
<textarea id="rawData">
Markus 63, 25, 69
Erwin 48, 58, 63
Phil 76, 63, 20
Didi 48, 12, 32
Steffo 42, 85, 96
Basti 25, 52, 78
Eirik 99, 3, 45
Emil 61, 72, 91
Kempka 36, 25, 32
Espen 57, 29, 53
Alex 45, 50, 87
</textarea>

<script>
const textarea = document.getElementById("rawData");
const dashboardText = textarea.value.trim();
const lines = dashboardText.split("\n");
const players = [];
const pointsByPlayer = {};

lines.forEach(line => {
  const [name, ...rest] = line.split(/[\s,]+/);
  const points = rest.map(Number);
  players.push(name);
  pointsByPlayer[name] = points;
});

const maxGames = Math.max(...Object.values(pointsByPlayer).map(arr => arr.length));
const matchdays = Array.from({length: maxGames}, (_, i) => i + 1);
const cumulativePoints = {};
players.forEach(player => {
  let sum = 0;
  cumulativePoints[player] = pointsByPlayer[player].map(p => sum += p);
});

const colors = ['#E41A1C','#377EB8','#4DAF4A','#984EA3','#FF7F00','#A65628','#F781BF','#999999','#66C2A5','#FFD92F','#000000'];

const datasets = players.map((p,i)=>({
  label: p,
  data: cumulativePoints[p],
  borderColor: colors[i%colors.length],
  backgroundColor: colors[i%colors.length],
  fill:false,
  pointRadius:2,
  borderWidth:2,
  spanGaps:true
}));

const ctx = document.getElementById('fieberkurveChart').getContext('2d');
new Chart(ctx,{
  type:'line',
  data:{ labels: matchdays, datasets },
  options:{
    responsive:true,
    maintainAspectRatio:false,
    plugins:{ legend:{display:true, position:'top'}, tooltip:{ callbacks:{ label: t => `${t.dataset.label}: ${t.raw}` } } },
    scales:{ x:{ title:{display:true,text:'Spieltag'}}, y:{ title:{display:true,text:'Kumulative Punkte'}, beginAtZero:true } }
  }
});
</script>

</body>
</html>
